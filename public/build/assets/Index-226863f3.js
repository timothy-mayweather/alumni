import{a as e,j as i,b as w,r as o,q as A,d as v}from"./app-0bc4e90a.js";import{A as C}from"./AuthenticatedLayout-45bfaace.js";import{P as p}from"./PrimaryButton-5735c0e2.js";import{M as x}from"./Modal-d5c410f0.js";import"./ApplicationLogo-f9e12f05.js";import"./transition-cd347c9a.js";function k({currentUser:a,showModal:c,setShowModal:h,setRespUser:m}){let n=null,d=!1;function r(){h(!1),n=null,d=!1}function s(){n===null&&!d?$.notify("No action to apply!"):axios.put("/users/"+a.id,{newRole:n,checked:d}).then(t=>{t.status===200?(m(t.data),$.notify("Changed successfully","success"),r()):$.notify("An error occurred")}).catch(t=>{console.log(t),$.notify(t)})}return e("div",{children:e(x,{onClose:r,show:c,children:i("div",{className:"px-6 py-6",children:[i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Name: "}),e("span",{children:a.firstName+" "+(a.middleName??"")+" "+a.lastName})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Email: "}),e("span",{children:a.email})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Role: "}),e("span",{className:"mr-4",children:a.role}),e("label",{className:"mr-4",children:"Change Role:"}),i("select",{defaultValue:a.role,onChange:t=>{n=t.target.value},children:[e("option",{value:"admin",children:"Admin"}),e("option",{value:"alumni",children:"Alumni"})]})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Status: "}),e("span",{className:"mr-8",children:a.deleted_at!==null?"Deactivated":a.role==="provisional"?"Not Approved":"Active"}),e("input",{type:"checkbox",defaultChecked:!1,onChange:t=>{d=t.target.checked}}),e("label",{className:"ml-3",children:a.deleted_at!==null?"Activate":"Deactivate"})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Email Verified: "}),e("span",{children:a.email_verified_at===null?"No":"Yes"})]}),i("div",{children:[e(p,{className:"mr-6",onClick:()=>{s()},children:"Apply"}),e(p,{className:"bg-red-600 hover:bg-red-600",onClick:()=>{r()},children:"Cancel"})]})]})})})}function E({fetchedUsers:a}){const[c,h]=o.useState(Object.fromEntries(new Map(a.map(l=>[l.id,l])))),[m,n]=o.useState(!1),[d,r]=o.useState(a[0]),[s,t]=o.useState(null),u=A().props.auth.user,f=[];o.useEffect(()=>{s!==null&&h({...c,[s.id]:s})},[s]);const N="viewUsersTable";$(document).ready(function(){$("#"+N).DataTable({columnDefs:[{searchable:!1,targets:[5,6]}],bDestroy:!0})});function b(l){r(l),n(!0)}function y(){window.location.href="mailto:"+f.toString()}function g(){navigator.clipboard.writeText(f.toString()),$.notify("All emails copied to the clipboard","info")}return i("div",{children:[e(k,{showModal:m,setShowModal:n,currentUser:d,setRespUser:t}),i("table",{id:N,className:"cell-border hover",children:[e("thead",{children:i("tr",{children:[e("th",{children:"Name"}),i("th",{children:["Email",e("i",{className:"fa fa-envelope text-blue-700 ml-2",onClick:y}),e("i",{className:"fa fa-copy text-blue-700 ml-2",onClick:g})]}),e("th",{children:"Role"}),e("th",{children:"Status"}),e("th",{children:"Email Verified"}),e("th",{}),e("th",{}),e("th",{})]})}),e("tbody",{children:Object.values(c).map(l=>(f.push(l.email),i("tr",{children:[e("td",{children:l.firstName+" "+(l.middleName??"")+" "+l.lastName}),e("td",{children:l.email}),e("td",{children:l.role}),e("td",{children:l.deleted_at!==null?"Deactivated":"Active"}),e("td",{children:l.email_verified_at===null?"No":"Yes"}),e("td",{children:e(v,{href:u.id===l.id?"/profile":"/profile/"+l.id,children:e("u",{children:"profile"})})}),e("td",{children:e(v,{href:u.id===l.id?"/academic":"/academic/"+l.id,onFinish:()=>{window.location.pathname==="/users"&&$.notify("Academic info not found!")},children:e("u",{children:"academic"})})}),e("th",{children:e(p,{onClick:()=>{b(l)},children:"EDIT"})})]},l.id)))})]})]})}function T({auth:a,users:c}){return i(C,{user:a.user,children:[e(w,{title:"Users"}),e("div",{className:"mx-auto p-4 sm:p-6 lg:p-8 bg-white",children:e(E,{fetchedUsers:c})})]})}export{T as default};
