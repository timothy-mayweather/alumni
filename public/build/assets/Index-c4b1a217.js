import{a as e,j as i,b,r as o,q as y,d as N}from"./app-2d7fc0bf.js";import{A as g}from"./AuthenticatedLayout-336c143f.js";import{P as p}from"./PrimaryButton-653042de.js";import{M as A}from"./Modal-67685da3.js";import"./ApplicationLogo-319299b2.js";import"./transition-0fbe9c79.js";function C({currentUser:a,showModal:n,setShowModal:h,setRespUser:m}){let t=null,c=!1;function r(){h(!1),t=null,c=!1}function s(){t===null&&!c?$.notify("No action to apply!"):axios.put("/users/"+a.id,{newRole:t,checked:c}).then(d=>{d.status===200?(m(d.data),$.notify("Changed successfully","success"),r()):$.notify("An error occurred")}).catch(d=>{console.log(d),$.notify(d)})}return e("div",{children:e(A,{onClose:r,show:n,children:i("div",{className:"px-6 py-6",children:[i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Name: "}),e("span",{children:a.firstName+" "+(a.middleName??"")+" "+a.lastName})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Email: "}),e("span",{children:a.email})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Role: "}),e("span",{className:"mr-4",children:a.role}),e("label",{className:"mr-4",children:"Change Role:"}),i("select",{defaultValue:a.role,onChange:d=>{t=d.target.value},children:[e("option",{value:"admin",children:"Admin"}),e("option",{value:"alumni",children:"Alumni"})]})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Status: "}),e("span",{className:"mr-8",children:a.deleted_at!==null?"Deactivated":a.role==="provisional"?"Not Approved":"Active"}),e("input",{type:"checkbox",defaultChecked:!1,onChange:d=>{c=d.target.checked}}),e("label",{className:"ml-3",children:a.deleted_at!==null?"Activate":"Deactivate"})]}),i("div",{className:"mb-4",children:[e("span",{className:"mr-2",children:"Email Verified: "}),e("span",{children:a.email_verified_at===null?"No":"Yes"})]}),i("div",{children:[e(p,{className:"mr-6",onClick:()=>{s()},children:"Apply"}),e(p,{className:"bg-red-600 hover:bg-red-600",onClick:()=>{r()},children:"Cancel"})]})]})})})}function w({fetchedUsers:a}){const[n,h]=o.useState(Object.fromEntries(new Map(a.map(l=>[l.id,l])))),[m,t]=o.useState(!1),[c,r]=o.useState(a[0]),[s,d]=o.useState(null),f=y().props.auth.user;o.useEffect(()=>{s!==null&&h({...n,[s.id]:s})},[s]);const u="viewUsersTable";$(document).ready(function(){$("#"+u).DataTable({columnDefs:[{searchable:!1,targets:[5,6]}],bDestroy:!0})});function v(l){r(l),t(!0)}return i("div",{children:[e(C,{showModal:m,setShowModal:t,currentUser:c,setRespUser:d}),i("table",{id:u,className:"cell-border hover",children:[e("thead",{children:i("tr",{children:[e("th",{children:"Name"}),e("th",{children:"Email"}),e("th",{children:"Role"}),e("th",{children:"Status"}),e("th",{children:"Email Verified"}),e("th",{}),e("th",{}),e("th",{})]})}),e("tbody",{children:Object.values(n).map(l=>i("tr",{children:[e("td",{children:l.firstName+" "+(l.middleName??"")+" "+l.lastName}),e("td",{children:l.email}),e("td",{children:l.role}),e("td",{children:l.deleted_at!==null?"Deactivated":l.role==="provisional"?"Not Approved":"Active"}),e("td",{children:l.email_verified_at===null?"No":"Yes"}),e("td",{children:e(N,{href:f.id===l.id?"/profile":"/profile/"+l.id,children:e("u",{children:"profile"})})}),e("td",{children:e(N,{href:f.id===l.id?"/academic":"/academic/"+l.id,children:e("u",{children:"academic"})})}),e("th",{children:e(p,{onClick:()=>{v(l)},children:"EDIT"})})]},l.id))})]})]})}function M({auth:a,users:n}){return i(g,{user:a.user,children:[e(b,{title:"Users"}),e("div",{className:"mx-auto p-4 sm:p-6 lg:p-8 bg-white",children:e(w,{fetchedUsers:n})})]})}export{M as default};
